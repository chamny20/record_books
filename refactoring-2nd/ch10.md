# ğŸ”Ÿ Ch10

### 10.1 ì¡°ê±´ë¬¸ ë¶„í•´í•˜ê¸°

```tsx
// before
if (!aDate.isBefore(plan.summerStart) && !aDate.isAfter(plan.summerEnd)) {
    charge = quantity * plan.summerRate;
} else {
    charge = quantity * plan.regularRate + plan.regularServiceCharge;
}
```

```tsx
// after
if (summer()) {
    charge = summerCharge();
} else {
    charge = regularCharge();
}
```

#### \[ë°°ê²½]

* ê±°ëŒ€í•œ ì½”ë“œ ë¸”ë¡ì´ ìˆëŠ” ê²½ìš° ë¶„í•´í•´ì„œ ê° ë©ì–´ë¦¬ì— ì˜ë„ë¥¼ ì‚´ë¦° ì´ë¦„ì„ ë¶™ì´ê¸°
* ë§ì€ ì¼€ì´ìŠ¤ì˜ ì¡°ê±´, ë™ì‘ ë•Œë¬¸ì— ê¸´ í•¨ìˆ˜ê°€ íƒ„ìƒ â†’ ì•Œì•„ë³´ê¸° ì–´ë ¤ì›€
* ë¶„ê¸°ì˜ ì˜ë„ì™€ ë¬´ì—‡ì„ ë¶„ê¸°í–ˆëŠ”ì§€ ëª…í™•íˆ ë“œëŸ¬ë‚´ê¸°

#### \[ì ˆì°¨]

* ì¡°ê±´ì‹ê³¼ ê·¸ ì¡°ê±´ì‹ì— ë”¸ë¦° ì¡°ê±´ì ˆ ê°ê°ì„ í•¨ìˆ˜ë¡œ ì¶”ì¶œ

### 10.2 ì¡°ê±´ì‹ í†µí•©í•˜ê¸°

```tsx
// before
if (anEmployee.seniority < 2) return 0;
if (anEmployee.monthsDisabled > 12) return 0;
if (anEmployee.isPartTime) return 0;
```

```tsx
// after
if (isNotEligibleForDisability()) return 0;

function isNotEligibleForDisability() {
    return (
        (anEmployee.seniority < 2)
        || (anEmployee.monthsDisabled > 12)
        || (anEmployee.isPartTime)
    )
}
```

#### \[ë°°ê²½]

* ê°™ì€ ì¼ì„ í•˜ëŠ” ì¡°ê±´ë“¤ì€ ê²€ì‚¬ë¥¼ í•˜ë‚˜ë¡œ í†µí•©í•˜ê¸°
* and, or ì—°ì‚°ì í™œìš©
* í•¨ìˆ˜ ì¶”ì¶œ
* ë…ë¦½ëœ ì¡°ê±´ë“¤ì€ í†µí•©í•˜ì§€ ë§ê¸°!

#### \[ì ˆì°¨]

1. í•´ë‹¹ ì¡°ê±´ì‹ ëª¨ë‘ side effectê°€ ì—†ëŠ”ì§€ í™•ì¸
2. ì¡°ê±´ë¬¸ 2ê°œë¥¼ ì„ íƒí•´ ë…¼ë¦¬ ì—°ì‚°ìë¡œ ê²°í•©
3. í…ŒìŠ¤íŠ¸
4. ì¡°ê±´ì´ í•˜ë‚˜ ë‚¨ì„ ë•Œê¹Œì§€ ë°˜ë³µ
5. í•¨ìˆ˜ë¡œ ì¶”ì¶œí• ì§€ë„ ê³ ë¯¼í•´ë³´ê¸° (í•¨ìˆ˜ë¡œ ì¶”ì¶œí•˜ê¸° == ë¬´ì—‡ì„ í•˜ëŠ”ì§€ì— ëŒ€í•œ ì½”ë“œë¥¼ ì™œ í•˜ëŠ”ì§€ë¡œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ë¦¬íŒ©í† ë§ ê¸°ë²•)

### 10.3 ì¤‘ì²© ì¡°ê±´ë¬¸ì„ ë³´í˜¸ êµ¬ë¬¸ìœ¼ë¡œ ë°”ê¾¸ê¸°

```tsx
// before
function getPayAmount() {
    let result;
    
    if (isDead) {
        result = deadAmount();
    } else {
        if (isSeparated) {
            result = separatedAmount();
        } else {
            if (isRetired) {
                result = retiredAmount();
            } else {
                result = normalPayAmount();
            }
        }
    }

    return result;
}
```

```tsx
// after
function getPayAmount() {
    if (isDead) return deadAmount();
    if (isSeparated) return separatedAmount();
    if (isRetired) return retiredAmount();

    return normalPayAmount();
}
```

#### \[ë°°ê²½]

* **ë³´í˜¸ êµ¬ë¬¸(guard clause)**: â€œì´ê±´ í•¨ìˆ˜ì˜ í•µì‹¬ì´ ì•„ë‹ˆë‹¤. ì´ ì¼ì´ ì¼ì–´ë‚˜ë©´ ì¡°ì¹˜ë¥¼ ì·¨í•˜ê³  í•¨ìˆ˜ì—ì„œ ë¹ ì ¸ë‚˜ì™€ì•¼ í•œë‹¤.â€
  * í”íˆ ìš°ë¦¬ê°€ ì•„ëŠ” if ì ˆë¡œ ê²€ì‚¬í•˜ëŠ” í˜•íƒœ
* ì¤‘ì²© ì¡°ê±´ë¬¸ì„ ë³´í˜¸ êµ¬ë¬¸ìœ¼ë¡œ ë°”ê¾¸ë©´ ì½”ë“œê°€ ëª…í™•í•´ì§„ë‹¤.

#### \[ì ˆì°¨]

1. êµì²´í•´ì•¼ í•  ì¡°ê±´ ì¤‘ ê°€ì¥ ë°”ê¹¥ ê²ƒì„ ì„ íƒí•˜ì—¬ ë³´í˜¸ êµ¬ë¬¸ìœ¼ë¡œ ë°”ê¾¼ë‹¤.
2. í…ŒìŠ¤íŠ¸
3. ê³¼ì • ë°˜ë³µ
4. ëª¨ë“  ë³´í˜¸ êµ¬ë¬¸ì´ ê°™ì€ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤ë©´ ë³´í˜¸ êµ¬ë¬¸ì˜ ì¡°ê±´ì‹ì„ í†µí•©í•œë‹¤.

### 10.4 ì¡°ê±´ë¬¸ ë¡œì§ì„ ë‹¤í˜•ì„±ìœ¼ë¡œ ë°”ê¾¸ê¸°

```tsx
// before
switch (bird.type) {
    case 'ìœ ëŸ½ ì œë¹„':
        return "ë³´í†µì´ë‹¤";
    case 'ì•„í”„ë¦¬ì¹´ ì œë¹„':
        return (bird.numberOfCoCounts > 2) ? "ì§€ì³¤ë‹¤" : "ë³´í†µì´ë‹¤";
    case 'ë…¸ë¥´ì›¨ì´ íŒŒë‘ ì•µë¬´':
        return (bird.voltage > 100) ? "ê·¸ì„ë ¸ë‹¤" : "ì˜ˆì˜ë‹¤";
    default:
        return "ì•Œ ìˆ˜ ì—†ë‹¤";
}
```

```tsx
// after
class EuropeanSwallow {
    get plumage() {
        return "ë³´í†µì´ë‹¤";
    }
}

class AfricanSwallow {
    get plumage() {
        return (this.numberOfCoCounts > 2) ? "ì§€ì³¤ë‹¤" : "ë³´í†µì´ë‹¤";
    }
}

class NorwegianBlueParrot {
    get plumage() {
        return (this.voltage > 100) ? "ê·¸ì„ë ¸ë‹¤" : "ì˜ˆì˜ë‹¤";
    }
}
```

#### \[ë°°ê²½]

* ì¡°ê±´ë¶€ ë¡œì§ì„ ì§ê´€ì ìœ¼ë¡œ êµ¬ì¡°í™”í•˜ëŠ” ê²ƒì´ ì¤‘ìš”
  * í´ë˜ìŠ¤, ë‹¤í˜•ì„±ì„ ì´ìš©í•´ ì¡°ê±´ë¶€ ë¡œì§ì„ ì§ê´€ì ìœ¼ë¡œ êµ¬ì¡°í™”
* typeì„ ê¸°ì¤€ìœ¼ë¡œ ë¶„ê¸°í•˜ëŠ” switchë¬¸ì´ í¬í•¨ëœ í•¨ìˆ˜ê°€ ì—¬ëŸ¬ê°œ ë³´ì´ëŠ” ê²½ìš°
  * caseë³„ë¡œ í´ë˜ìŠ¤ë¥¼ í•˜ë‚˜ì”© ë§Œë“¤ì–´ ê³µí†µ switch ë¡œì§ì˜ ì¤‘ë³µì„ ì—†ì• ì.

#### \[ì ˆì°¨]

1. ë‹¤í˜•ì  ë™ì‘ì„ í‘œí˜„í•˜ëŠ” í´ë˜ìŠ¤ë“¤ì´ ì—†ë‹¤ë©´ ë§Œë“¤ê¸°
2. í˜¸ì¶œí•˜ëŠ” ì½”ë“œê°€ factory í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ í•˜ê¸°
3. ì¡°ê±´ë¶€ ë¡œì§ í•¨ìˆ˜ë¥¼ super classë¡œ ì˜®ê¸°ê¸°
4. ì„œë¸Œ í´ë˜ìŠ¤ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ê³ , ìˆ˜í¼ í´ë˜ìŠ¤ì˜ ì¡°ê±´ë¶€ ë¡œì§ ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œ í•˜ê¸°
5. ê°™ì€ ë°©ì‹ìœ¼ë¡œ ê° ì¡°ê±´ì ˆì„ ì„œë¸Œí´ë˜ìŠ¤ë“¤ì—ì„œ ë©”ì„œë“œë¡œ êµ¬í˜„
6. ìˆ˜í¼ í´ë˜ìŠ¤ ë©”ì„œë“œì—ëŠ” ê¸°ë³¸ ë™ì‘ë§Œ ë‚¨ê¸°ê¸°

### 10.5 íŠ¹ì´ ì¼€ì´ìŠ¤ ì¶”ê°€í•˜ê¸°

```tsx
// before
if (aCustomer === "ë¯¸í™•ì¸ ê³ ê°") customerName = "ê±°ì£¼ì";
```

```tsx
// after
class UnknownCustomer {
    get name() {return "ê±°ì£¼ì";}
}
```

#### \[ë°°ê²½]

* ë°ì´í„° êµ¬ì¡°ì˜ íŠ¹ì • ê°’ì„ í™•ì¸ í›„ ë˜‘ê°™ì€ ë™ì‘ì„ ë°˜ë³µí•˜ëŠ” ì½”ë“œê°€ ìˆë‹¤ë©´? â‡’ í•´ê²° í•„ìš”
* íŠ¹ìˆ˜í•œ ê²½ìš°ì˜ ê³µí†µ ë™ì‘ì„ í•˜ë‚˜ì— ëª¨ì•„ì„œ ì‚¬ìš©í•˜ëŠ” ê²½ìš° â†’ íŠ¹ì´ ì¼€ì´ìŠ¤ íŒ¨í„´ (Special Case Pattern)
  * Null Object Patternì´ë¼ê³ ë„ í•¨

#### \[ì ˆì°¨]

1. ì»¨í…Œì´ë„ˆì— íŠ¹ì´ì¼€ì´ìŠ¤ì¸ì§€ ê²€ì‚¬í•˜ëŠ” ì†ì„± ì¶”ê°€
2. íŠ¹ì´ì¼€ì´ìŠ¤ ê°ì²´ ìƒì„±
3. í´ë¼ì´ì–¸íŠ¸ì—ì„œ íŠ¹ì´ì¼€ì´ìŠ¤ ì—¬ë¶€ë¥¼ ê²€ì‚¬í•˜ëŠ” ì½”ë“œë¥¼ í•¨ìˆ˜ë¡œ ì¶”ì¶œ â†’ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •
4. ì½”ë“œì— ìƒˆë¡œìš´ íŠ¹ì´ì¼€ì´ìŠ¤ ëŒ€ìƒ ì¶”ê°€
5. íŠ¹ì´ì¼€ì´ìŠ¤ë¥¼ ê²€ì‚¬í•˜ëŠ” í•¨ìˆ˜ ìˆ˜ì •
6. í…ŒìŠ¤íŠ¸
7. ì—¬ëŸ¬ í•¨ìˆ˜ë¥¼ í´ë˜ìŠ¤/í•¨ìˆ˜ë¡œ ë¬¶ê¸°
8. ê²€ì‚¬ í•¨ìˆ˜ ì¸ë¼ì¸

### 10.6 ì–´ì„œì…˜ ì¶”ê°€í•˜ê¸°

```tsx
// before
if (this.discountRate) {
    base -= this.discountRate * base;
}
```

```tsx
// after
assert(this.discountRate >= 0) 

if (this.discountRate) {
    base -= this.discountRate * base;
}
```

#### \[ë°°ê²½]

* íŠ¹ì • ì¡°ê±´ ë‚´ì—ì„œ ë™ì‘í•˜ëŠ” ì½”ë“œë“¤ì€ ì•Œê³ ë¦¬ì¦˜ì„ ë³´ê³  ê°œë°œìê°€ ì—°ì—­ì ìœ¼ë¡œ ì•Œì•„ë‚´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ì¡´ì¬
* ì£¼ì„ìœ¼ë¡œë„ í‘œí˜„í•  ìˆœ ìˆì§€ë§Œ, ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ assertion í™œìš© â†’ ì½”ë“œ ìì²´ì— ì‚½ì…í•´ë†“ê¸°, ì½”ë“œì— ëª…ì‹œì ìœ¼ë¡œ í‘œì‹œí•˜ê¸°
* ì–´ì„œì…˜: í•­ìƒ ì°¸ì´ë¼ê³  ê°€ì •í•˜ëŠ” ì¡°ê±´ë¶€ë¡œ ì´ê²Œ ì°¸ì´ ì•„ë‹Œ ê°’ì´ ë„˜ì–´ì˜¨ë‹¤ë©´ í”„ë¡œê·¸ë˜ë¨¸ê°€ ì‹¤ìˆ˜í–ˆë‹¤ëŠ” ëœ»

#### \[ì ˆì°¨]

* ì°¸ì´ë¼ê³  ê°€ì •í•˜ëŠ” ì¡°ê±´ì´ ë³´ì´ë©´, ì–´ì„œì…˜ì„ ì¶”ê°€í•œë‹¤.

```tsx
public int applyDiscount(int number) {
    Assert.isTrue(discountRate > 0);
    if (discountRate > 0) return number; 
    return number - ((int) discountRate * number); 
}
```

ìœ„ì—ì„  ì–´ì„œì…˜ì´ applyDiscountì— ìˆëŠ” ìƒíƒœ

í•˜ì§€ë§Œ discountRateëŠ” ì²˜ìŒì— í• ë‹¹ë˜ëŠ” ê³³ì— ì–´ì„œì…˜ì´ ìˆëŠ” ê²Œ ë§ë‹¤. ë”°ë¼ì„œ, ì•„ë˜ì™€ ê°™ì´ ì„¸í„°ì— ë„£ëŠ” ê²Œ ì¢‹ìŒ

```tsx
public void setDiscountRate(double discountRate) {
    Assert.isTrue(discountRate > 0);
    this.discountRate = discountRate;
}
```

### 10.7 ì œì–´ í”Œë˜ê·¸ë¥¼ íƒˆì¶œë¬¸ìœ¼ë¡œ ë°”ê¾¸ê¸°

```tsx
// before
for (const p of people) {
    if (!found) {
        if (p === "ì¡°ì»¤") {
            sendAlert();
            fount = true;
        }
    }
}
```

```tsx
// after
for (const p of people) {
    if (p === "ì¡°ì»¤") {
        sendAlert();
        break;
    }
}
```

#### \[ë°°ê²½]

* ì œì–´ í”Œë˜ê·¸: ì½”ë“œ ë™ì‘ì„ ë³€ê²½í•˜ëŠ” ë°ì— ì‚¬ìš©í•˜ëŠ” ë³€ìˆ˜
* ì£¼ ì„œì‹ì§€ â†’ ë°˜ë³µë¬¸ ë‚´ë¶€
* ë³µì¡í•˜ê²Œ ì‘ì„±ëœ ì½”ë“œì—ì„œ í”íˆ ë‚˜íƒ€ë‚œë‹¤.
* break ë¬¸ì´ë‚˜ continue ë¬¸ì— ìµìˆ™í•˜ì§€ ì•Šì€ ì‚¬ëŒì´ê±°ë‚˜, í•¨ìˆ˜ì˜ return ì„ ì ì ˆí•˜ê²Œ ì´ìš©í•˜ì§€ ëª»í•˜ë©´ ë‚˜ì˜¨ë‹¤.

#### \[ì ˆì°¨]

1. ì œì–´ í”Œë˜ê·¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œë¥¼ í•¨ìˆ˜ë¡œ ì¶”ì¶œí• ì§€ ê³ ë ¤í•œë‹¤.
2. ì œì–´ í”Œë˜ê·¸ë¥¼ ê°±ì‹ í•˜ëŠ” ì½”ë“œ ê°ê°ì„ ì ì ˆí•œ ì œì–´ë¬¸ìœ¼ë¡œ ë°”ê¾¼ë‹¤.
3. í…ŒìŠ¤íŠ¸
4. ëª¨ë‘ ìˆ˜ì •í–ˆë‹¤ë©´ ì œì–´ í”Œë˜ê·¸ ì œê±°

```tsx
boolean found = false; 

for (Person p : people) {
    if (!found) {
        if (p.name.equals("ì¡°ê±°")) {
            sendAlert();
            found = true; 
        }
        if (p.name.equals("ì‚¬ë£¨ë§Œ")) {
            sendAlert();
            found = true; 
        }
    }
}
```

â‡’ ì—¬ê¸°ì„œ found í”Œë˜ê·¸ê°€ ì œì–´ í”Œë˜ê·¸.

â‡’ ì œì–´ í”Œë˜ê·¸ë¥¼ ë¹¼ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

```tsx
public void checkForMiscreants(List<Person> people) {
    for (Person p : people) {
        if (p.name.equals("ì¡°ê±°")) {
            sendAlert();
            return;
        }
        if (p.name.equals("ì‚¬ë£¨ë§Œ")) {
            sendAlert();
            return;
        }
    }
}
```
